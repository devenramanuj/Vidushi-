<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidushi - AI Chatbot</title>
    <style>
        /* --- CSS Styles --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #000; /* ркмрлНрк▓рлЗркХ ркмрлЗркХркЧрлНрк░рк╛ркЙркирлНркб */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }

        /* ркЕрк╡ркдрк╛рк░ (рклрлЛркЯрлЛ) ркорк╛ркЯрлЗркирлБркВ рк╕рлЗркЯрк┐ркВркЧ */
        #avatar-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        #avatar-img {
            max-width: 100%;
            max-height: 90vh; /* рк╕рлНркХрлНрк░рлАрки рккрк░ ркорлЛркЯрлЛ ркжрлЗркЦрк╛ркп */
            object-fit: contain;
            transition: transform 0.1s; /* рк╕рлНркорлВркз ркПркирк┐ркорлЗрк╢рки */
        }

        /* ркЬрлНркпрк╛рк░рлЗ ркмрлЛрк▓рлЗ ркдрлНркпрк╛рк░рлЗ ркЖ ркПркирк┐ркорлЗрк╢рки ркерк╢рлЗ (Talking Effect) */
        .speaking {
            animation: talk-pulse 0.2s infinite alternate;
        }

        @keyframes talk-pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.03); } /* рклрлЛркЯрлЛ ркерлЛркбрлЛ ркЭрлВрко ркерк╢рлЗ */
        }

        /* ркорк╛ркИркХ ркмркЯркиркирлБркВ рк╕рлЗркЯрк┐ркВркЧ */
        #mic-btn {
            position: absolute;
            bottom: 30px;
            padding: 15px 30px;
            font-size: 20px;
            border-radius: 50px;
            border: none;
            background-color: #ff5722; /* ркнркЧрк╡рлЛ рк░ркВркЧ */
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            z-index: 100;
        }

        #mic-btn:active {
            transform: scale(0.95);
        }

        /* рк╕рлНркЯрлЗркЯрк╕ (рк╕рк╛ркВркнрк│рлЗ ркЫрлЗ ркХрлЗ ркирк╣рлАркВ) */
        #status {
            position: absolute;
            top: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 14px;
        }

    </style>
</head>
<body>

    <div id="avatar-container">
        <img id="avatar-img" src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" alt="Vidushi Avatar">
        
        <div id="status">Tap button to start</div>
        <button id="mic-btn" onclick="startListening()">ЁЯОд рк╡рк╛ркд ркХрк░рлЛ</button>
    </div>

    <script>
        // --- 1. рк╕рлЗркЯркЕркк ---
        const btn = document.getElementById("mic-btn");
        const statusDisplay = document.getElementById("status");
        const avatar = document.getElementById("avatar-img");
        
        // рк╕рлНрккрлАркЪ рк░рлЗркХркЧрлНркирк┐рк╢рки (рк╕рк╛ркВркнрк│рк╡рк╛ ркорк╛ркЯрлЗ)
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        
        recognition.lang = 'gu-IN'; // ркЧрлБркЬрк░рк╛ркдрлА ркнрк╛рк╖рк╛
        recognition.interimResults = false;

        // рк╕рлНрккрлАркЪ рк╕рк┐ркирлНркерлЗрк╕рк┐рк╕ (ркмрлЛрк▓рк╡рк╛ ркорк╛ркЯрлЗ)
        const synth = window.speechSynthesis;
        let isFirstTime = true; // рккрк╣рлЗрк▓рлА рк╡рк╛рк░ рк╡рк╛ркдркЪрлАркд ркерк╛ркп ркЫрлЗ?

        // --- 2. рк╕рк╛ркВркнрк│рк╡рк╛ркирлА рккрлНрк░ркХрлНрк░рк┐ркпрк╛ ---
        function startListening() {
            try {
                recognition.start();
                statusDisplay.innerText = "рк╕рк╛ркВркнрк│рлБркВ ркЫрлБркВ...";
                btn.style.backgroundColor = "green";
            } catch (e) {
                console.log("Already listening or error");
            }
        }

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript.toLowerCase();
            statusDisplay.innerText = "рк╡рк┐ркЪрк╛рк░рлБркВ ркЫрлБркВ...";
            btn.style.backgroundColor = "#ff5722";
            
            // ркЬрк╡рк╛ркм ркдрлИркпрк╛рк░ ркХрк░рлЛ
            generateResponse(transcript);
        };

        recognition.onerror = (event) => {
            statusDisplay.innerText = "рклрк░рлАркерлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ";
            btn.style.backgroundColor = "#ff5722";
        };

        // --- 3. ркоркЧркЬ (Logic) - ркЕрк╣рлАркВ ркЬрк╡рк╛ркмрлЛ ркиркХрлНркХрлА ркерк╛ркп ркЫрлЗ ---
        function generateResponse(input) {
            let reply = "";

            // рккрк╣рлЗрк▓рлА рк╡рк╛рк░ рк╡рк╛ркд ркХрк░рлЗ ркдрлЛ
            if (isFirstTime) {
                reply = "ркЬркп рк╢рлНрк░рлА ркХрлГрк╖рлНркг! рк╣рлБркВ рк╡рк┐ркжрлБрк╖рлА ркЫрлБркВ. рк╕ркирк╛ркдрки ркзрк░рлНрко рк╡рк┐рк╢рлЗ ркЖркк рк╢рлБркВ ркЬрк╛ркгрк╡рк╛ ркорк╛ркВркЧрлЛ ркЫрлЛ?";
                isFirstTime = false;
            } 
            // рк╕рк╛ркорк╛ркирлНркп ркЬрк╡рк╛ркмрлЛ
            else if (input.includes("ркХрлЗрко ркЫрлЛ") || input.includes("ркоркЬрк╛ркорк╛ркВ")) {
                reply = "рк╣рлБркВ ркоркЬрк╛ркорк╛ркВ ркЫрлБркВ. рккрлНрк░ркнрлБркирлА ркХрлГрккрк╛ ркЫрлЗ. ркЖркк ркХрлЗрко ркЫрлЛ?";
            }
            else if (input.includes("ркЧрлАркдрк╛") || input.includes("ркХрлГрк╖рлНркг")) {
                reply = "рк╢рлНрк░рлАркоркжрлН ркнркЧрк╡ркжрлН ркЧрлАркдрк╛ ркП ркоркирлБрк╖рлНркпркирк╛ ркЬрлАрк╡ркиркирлБркВ ркорк╛рк░рлНркЧркжрк░рлНрк╢рки ркЫрлЗ. ркнркЧрк╡рк╛рки рк╢рлНрк░рлА ркХрлГрк╖рлНркгрлЗ ркЕрк░рлНркЬрлБркиркирлЗ ркзрк░рлНрко ркЕркирлЗ ркХрк░рлНркоркирк╛ ркорк╛рк░рлНркЧ рккрк░ ркЪрк╛рк▓рк╡рк╛ркирлЛ ркЙрккркжрлЗрк╢ ркЖрккрлНркпрлЛ рк╣ркдрлЛ.";
            }
            else if (input.includes("ркирк╛рко рк╢рлБркВ")) {
                reply = "ркорк╛рк░рлБркВ ркирк╛рко рк╡рк┐ркжрлБрк╖рлА ркЫрлЗ. ркоркирлЗ ркжрлЗрк╡рлЗркирлНркжрлНрк░ркнрк╛ркИркП ркмркирк╛рк╡рлА ркЫрлЗ.";
            }
            else {
                // ркбрк┐рклрлЛрк▓рлНркЯ ркЬрк╡рк╛ркм
                reply = "ркорк╛ркл ркХрк░ркЬрлЛ, рк╣рлБркВ рк╕ркоркЬрлА рки рк╢ркХрлА. ркХрлГрккрк╛ ркХрк░рлАркирлЗ рк╕ркирк╛ркдрки ркзрк░рлНрко рк╡рк┐рк╢рлЗ рккрлНрк░рк╢рлНрки рккрлВркЫрлЛ.";
            }

            // ркмрлЛрк▓рк╡рк╛ркирлБркВ рк╢рк░рлВ ркХрк░рлЛ
            speakOut(reply);
        }

        // --- 4. ркмрлЛрк▓рк╡рк╛ркирлА рккрлНрк░ркХрлНрк░рк┐ркпрк╛ ркЕркирлЗ рк▓рк┐ркк рк╕рк┐ркВркХ (Animation) ---
        function speakOut(text) {
            // ркЬрлЛ ркЬрлВркирлБркВ ркмрлЛрк▓ркдрлА рк╣рлЛркп ркдрлЛ ркмркВркз ркХрк░рлЛ
            synth.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'gu-IN'; // ркЧрлБркЬрк░рк╛ркдрлА ркЕрк╡рк╛ркЬ
            
            // ркЕрк╡рк╛ркЬркирлЛ рк╕рлЗркЯрк┐ркВркЧ (ркЭркбркк ркЕркирлЗ рккрлАркЪ)
            utterance.rate = 0.9;
            utterance.pitch = 1.1;

            // ркЬрлНркпрк╛рк░рлЗ ркмрлЛрк▓рк╡рк╛ркирлБркВ рк╢рк░рлВ ркерк╛ркп -> ркПркирк┐ркорлЗрк╢рки ркЪрк╛рк▓рлБ
            utterance.onstart = () => {
                statusDisplay.innerText = "ркмрлЛрк▓рлЗ ркЫрлЗ...";
                avatar.classList.add("speaking"); // рклрлЛркЯрлЛ рк╣рк▓рк╢рлЗ
            };

            // ркЬрлНркпрк╛рк░рлЗ ркмрлЛрк▓рк╡рк╛ркирлБркВ рккрлВрк░рлБркВ ркерк╛ркп -> ркПркирк┐ркорлЗрк╢рки ркмркВркз
            utterance.onend = () => {
                statusDisplay.innerText = "рк╢рк╛ркВркд";
                avatar.classList.remove("speaking"); // рклрлЛркЯрлЛ рк╕рлНркерк┐рк░ ркерк╢рлЗ
                
                // ркУркЯрлЛркорлЗркЯрк┐ркХ рклрк░рлА рк╕рк╛ркВркнрк│рк╡рк╛ркирлБркВ рк╢рк░рлВ ркХрк░рк╡рлБркВ рк╣рлЛркп ркдрлЛ ркирлАркЪрлЗркирлА рк▓рк╛ркИрки ркЕрки-ркХрлЛркорлЗркирлНркЯ ркХрк░рлЛ
                // startListening(); 
            };

            synth.speak(utterance);
        }

    </script>
</body>
</html>
